{% extends 'AppBundle:frontend:layout_with_sidebar.html.twig' %}

{#{% block pre_body %}#}
{#{% include "@App/frontend/includes/carrusel.html.twig" %}#}
{#{{ render(path("ultimosproductos")) }}#}
{#{% endblock pre_body %}#}

{% block workarea -%}
    <div class="row">
        <!-- Primary Content Starts -->
        <div class="col-md-9">
            {#<!-- Breadcrumb Starts -->#}
            <ol class="breadcrumb">
                <li><a href="index.html">Home</a></li>
                <li class="active">Spices &amp; Herbs</li>
            </ol>
            {#<!-- Breadcrumb Ends -->#}
            {#<!-- Main Heading Starts -->#}
            <h2 class="main-heading2">
                {{ cat.nombre }}
            </h2>
            {#<!-- Main Heading Ends -->#}
            {#<!-- Category Intro Content Starts -->#}
            <div class="row cat-intro">
                <div class="col-sm-3">
                    <img src="{{ asset("uploads/categorias/"~ cat.imagen) }}" width="189" height="189" alt="Image"
                         class="img-responsive img-thumbnail">
                </div>
                <div class="col-sm-9 cat-body">
                    {{ cat.descripcion | raw }}
                </div>
            </div>
            {#<!-- Category Intro Content Ends -->#}
            {#<!-- Product Filter Starts -->#}
            <div class="product-filter">
                <div class="row">
                    <div class="col-md-4">
                        <div class="display">
                            <a href="#"  onclick="return ProductochangeView({{ cat.id }},'lista');" class="active">
                                <i class="fa fa-th-list" title="" data-original-title="List View"></i>
                            </a>
                            <a href="#" onclick="return ProductochangeView({{ cat.id }},'gird');"  >
                                <i class="fa fa-th" title="" data-original-title="Grid View"></i>
                            </a>
                        </div>
                    </div>
                    <div class="col-md-2 text-right">
                        <label class="control-label">{{ "Orden" | trans }}</label>
                    </div>
                    <div class="col-md-3 text-right">
                        <select class="form-control">
                            <option value="default" selected="selected">{{ "Predeterminado" | trans }}</option>
                            <option value="NAZ">{{ "Nombre (A - Z)" | trans }}</option>
                            <option value="NZA">{{ "Nombre (Z - A)" | trans }}</option>
                        </select>
                    </div>
                    <div class="col-md-1 text-right">
                        <label class="control-label">{{ 'Ver' | trans }}</label>
                    </div>
                    <div class="col-md-2 text-right">
                        <select class="form-control">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3" selected="selected">3</option>
                        </select>
                    </div>
                </div>
            </div>
            {#<!-- Product List Display Starts -->#}
            <div class="row lista_producto">
                {{ include('@App/frontend/Producto/productosAjax.html.twig') }}
            </div>
        </div>
        {#<!-- Primary Content Ends -->#}
        {#<!-- Sidebar Starts -->#}
        <div class="col-md-3">

        </div>
        {#<!-- Sidebar Ends -->#}
    </div>
    <br><br>
    <script type="text/javascript">

        /**
         * Llama ajax para poblar
         * @param cat
         * @param view
         * @returns {boolean}
         * @constructor
         */
        ProductochangeView = function(cat, view ){

            $(this).sibling().each(function(){
                alert("1");
            });
            $(this).parent().sibling().each(function(){
                alert("2");
            });
            



            $.ajax({
                url: Routing.generate('productos',{'id': cat, 'vista': view}),
                context: document.body,
                success: function(data){
                    $(".lista_producto").html(data);
                }

            }).done(function() {
                $( this ).addClass( "done" );
            });

            return false;
        }
    </script>
{% endblock %}

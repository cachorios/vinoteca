<script type="text/javascript">
    var fieldCount = '{{ form.metadatos|length }}';

    jQuery(document).ready(function () {
        $(document).on('click', '#add-metadato', function (e) {
            e.preventDefault();
            var fieldList = jQuery('#iten_list_metadatos_collection');
            var newWidget = fieldList.attr('data-prototype');
            newWidget = newWidget.replace(/__name__/g, fieldCount);
            fieldCount++;
            var newLi = jQuery('<li></li>').html(newWidget);
            newLi.appendTo(fieldList);

        });

        $(document).on('click', '.remove-list-item', function (e) {
            e.preventDefault();
            var collectionHolder = $($(this)).parents('tr');
            collectionHolder.remove();
        });

    })
</script>

<script type="text/javascript">
    $("#appbundle_categoria_imagen").fileinput({
        {% set imagen_src = entity.imagen == null ? asset("images/default-image.png" ) : asset("uploads/categorias/" ~ entity.imagen  ) %}
        initialPreview: ["<img src='{{ imagen_src }}' class='file-preview-image'>"],
        overwriteInitial: true,
        showUpload: false,
        showCaption: false,
        browseClass: "btn btn-primary btn-sm",
        fileType: "any",
        allowedFileTypes: ['image'],
        'allowedFileExtensions': ['jpg', 'png', 'gif'],
        uploadLabel: 'Subir',
        removeLabel: 'Quitar',
        browseLabel: 'Explorar'
    });
</script>

<script src="{{ asset('bundles/app/js/admin/plugins/tableDnD/jquery.tablednd.js') }} "></script>
<script type="text/javascript">
    $('#iten_list_metadatos_collection').tableDnD({
        dragHandle: ".dragHandle",
        onDrop: function (table, row) {

            var rows = table.tBodies[0].rows;

            for (var i = 0; i < rows.length; i++) {
                var row = rows[i];
                var cell = row.cells[0];
//                var id = cell.find('imput:first').attr('id');
            }

        }
    });
</script>